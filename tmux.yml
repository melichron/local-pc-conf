- block:
  - name: install screen
    package:
      name: "{{ item }}"
      state: latest
    loop:
    - "screen"
    - "curl"
    - "git"

  - name: clone tmux plugin
    git:
      

  - name: define .tmux.conf
    copy:
      dest: "/home/{{ USER }}/.tmux.conf"
      content: |
        {% raw -%}
		# https://rtfm.co.ua/linux-menedzher-terminalov-tmux-ustanovka-nastrojka-komandy/#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8

		unbind C-b
		set -g prefix C-a
		bind -n M-Left select-pane -L
		bind -n M-Right select-pane -U
		bind -n M-Up select-pane -U
		bind -n M-Down select-pane -D

		setw -g monitor-activity on
		set -g visual-activity on

		set-window-option -g window-status-current-bg cyan
		# set-option -g mouse-select-pane on
		setw -g mouse on

		bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xsel -i --clipboard"

		# Start windows and panes at 1, not 0
		set -g base-index 1
		setw -g pane-base-index 1
		set -g @cpu_bg-color "#[fg=#fa8072]"
		set -g status-right ' %d-%m-%Y %H:%M | #{ram_bg_color} #{ram_percentage} | #{cpu_bg_color} #{cpu_percentage} '
		# List of plugins
		set -g @plugin 'tmux-plugins/tpm'
		set -g @plugin 'tmux-plugins/tmux-sensible'
		set -g @plugin 'tmux-plugins/tmux-cpu'
		set -g @plugin 'tmux-plugins/tmux-resurrect'
		set -g @plugin 'tmux-plugins/tmux-continuum'

		set -g @continuum-restore 'on'

		run -b '~/.tmux/plugins/tpm/tpm'
        {% endraw -%}
      owner: '{{ USER }}'
      group: '{{ USER }}'
      mode: '0644'


